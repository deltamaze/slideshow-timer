@namespace blazor.Components
@using System.Text;
@using blazor.Store
@inject AppState AppState
@implements IDisposable



<p>
    @FormatDisplayTime()
</p>
@* Todo: break out into two buttons, one for start/pause and show depending on running status *@
<button class="btn btn-primary" @onclick="StartPause">Start / Pause</button>

<button class="btn btn-primary" @onclick="ResetStopwatch">Reset</button>

@code {


    protected override void OnInitialized()
    {
        AppState.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        AppState.OnChange -= StateHasChanged;
    }

    void StartPause()
    {
        AppState.AppStopwatch.StartStopwatch();
    }
    void ResetStopwatch()
    {
        AppState.AppStopwatch.ResetStopwatch();
    }
    string FormatDisplayTime()
    {
        StringBuilder sb = new StringBuilder();
        sb.AppendFormat("{0:D2}:", AppState.AppStopwatch.CurrentHour);
        sb.AppendFormat("{0:D2}:", AppState.AppStopwatch.CurrentMinute);
        sb.AppendFormat("{0:D2}", AppState.AppStopwatch.CurrentSecond);

        return sb.ToString();

    }

}
